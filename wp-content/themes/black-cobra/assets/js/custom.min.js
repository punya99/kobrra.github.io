// aos animation
AOS.init();

// Header margin with banner
document.getElementsByClassName("page-wrapper")[0].style = "padding-top:" + document.getElementsByTagName("header")[0].offsetHeight + "px;margin-bottom:" + document.getElementsByTagName("footer")[0].offsetHeight + "px";
//document.getElementsByClassName("page-wrapper")[0].style = "margin-bottom:" + document.getElementsByTagName("footer")[0].offsetHeight + "px";

$(document).ready(function() {

    $("#about-virgo-bg").addClass("d-none");
    $(".about-virgo-bg").css("background-image", "url(" + $("#about-virgo-bg").attr("src") + ")");

    $(function() {
        'use strict'
        $('[data-toggle="offcanvas"]').on('click', function() {
            $('.offcanvas-collapse').toggleClass('open')
        })
    })

    $(".read-more-btn").on("click", function() {
        // alert($(this).attr("data-controls"));
        if ($("#" + $(this).attr("data-controls")).hasClass('d-none')) {
            $(this).text("Read More");
            $("#" + $(this).attr("data-target")).removeClass("d-block");
            $("#" + $(this).attr("data-controls")).removeClass("d-none");
        } else {
            $(this).text("Read Less");
            $("#" + $(this).attr("data-target")).addClass("d-block");
            $("#" + $(this).attr("data-controls")).addClass("d-none");
        }
    });


    // -----------------------------
    //  Count Up
    // -----------------------------
    function counter() {
        var oTop;
        if ($('.count').length !== 0) {
            oTop = $('.count').offset().top - window.innerHeight;
        }
        if ($(window).scrollTop() > oTop) {
            $('.count').each(function() {
                var $this = $(this),
                    countTo = $this.attr('data-count');
                $({
                    countNum: $this.text()
                }).animate({
                    countNum: countTo
                }, {
                    duration: 1000,
                    easing: 'swing',
                    step: function() {
                        $this.text(Math.floor(this.countNum));
                    },
                    complete: function() {
                        $this.text(this.countNum);
                    }
                });
            });
        }
    }
    $(window).on('scroll', function() {
        counter();
    });

    // Slick slider

    $('.product-fluid-carousel').slick({
        dots: false,
        arrows: true,
        centerMode: false,
        infinite: false,
        slidesToShow: 6,
        slidesToScroll: 1,
        responsive: [{
                breakpoint: 1024,
                settings: {
                    slidesToShow: 4
                }
            },
            {
                breakpoint: 992,
                settings: {
                    slidesToShow: 3
                }
            },
            {
                breakpoint: 768,
                settings: {
                    slidesToShow: 2
                }
            },
            {
                breakpoint: 576,
                settings: {
                    slidesToShow: 1
                }
            },
            {
                breakpoint: 576,
                settings: {
                    slidesToShow: 1
                }
            }
        ]
    });
    $('.certificate-carousel').slick({
        dots: false,
        arrows: true,
        // prevArrow:"<i class='sprite-icon icon-chevron-left w-40p'>",
        // nextArrow:"<i class='sprite-icon icon-chevron-right w-40p'>",
        centerMode: false,
        infinite: false,
        slidesToShow: 3,
        slidesToScroll: 1,
        responsive: [{
                breakpoint: 1024,
                settings: {
                    slidesToShow: 3
                }
            },
            {
                breakpoint: 992,
                settings: {
                    slidesToShow: 2
                }
            },
            {
                breakpoint: 768,
                settings: {
                    slidesToShow: 1
                }
            },
            {
                breakpoint: 576,
                settings: {
                    slidesToShow: 1
                }
            },
            {
                breakpoint: 576,
                settings: {
                    slidesToShow: 1
                }
            }
        ]
    });
    $('.csr-single-carousel').slick({
        dots: false,
        arrows: true,
        prevArrow: "<i class='sprite-icon icon-chevron-left w-40p'>",
        nextArrow: "<i class='sprite-icon icon-chevron-right w-40p'>",
        centerMode: false,
        infinite: false,
        slidesToShow: 3,
        slidesToScroll: 1,
        responsive: [{
                breakpoint: 1024,
                settings: {
                    slidesToShow: 3
                }
            },
            {
                breakpoint: 992,
                settings: {
                    slidesToShow: 2
                }
            },
            {
                breakpoint: 768,
                settings: {
                    slidesToShow: 1
                }
            },
            {
                breakpoint: 576,
                settings: {
                    slidesToShow: 1
                }
            },
            {
                breakpoint: 576,
                settings: {
                    slidesToShow: 1
                }
            }
        ]
    });
    $('.one-carousel').slick({
        dots: false,
        arrows: true,
        autoplaySpeed: 1000,
        prevArrow: "<i class='sprite-icon icon-chevron-left w-40p'>",
        nextArrow: "<i class='sprite-icon icon-chevron-right w-40p'>",
        centerMode: false,
        infinite: false,
        slidesToShow: 1,
        slidesToScroll: 1,
        autoplay: true,
        responsive: [{
                breakpoint: 1024,
                settings: {
                    slidesToShow: 1
                }
            },
            {
                breakpoint: 992,
                settings: {
                    slidesToShow: 1
                }
            },
            {
                breakpoint: 768,
                settings: {
                    slidesToShow: 1
                }
            },
            {
                breakpoint: 576,
                settings: {
                    slidesToShow: 1
                }
            },
            {
                breakpoint: 576,
                settings: {
                    slidesToShow: 1
                }
            }
        ]
    });
    $('.press-carousel').slick({
        dots: false,
        arrows: true,
        prevArrow: "<i class='sprite-icon icon-chevron-left w-40p'>",
        nextArrow: "<i class='sprite-icon icon-chevron-right w-40p'>",
        centerMode: false,
        infinite: false,
        slidesToShow: 2,
        slidesToScroll: 1,
        responsive: [{
                breakpoint: 1024,
                settings: {
                    slidesToShow: 2
                }
            },
            {
                breakpoint: 992,
                settings: {
                    slidesToShow: 2
                }
            },
            {
                breakpoint: 768,
                settings: {
                    slidesToShow: 1
                }
            },
            {
                breakpoint: 576,
                settings: {
                    slidesToShow: 1
                }
            },
            {
                breakpoint: 576,
                settings: {
                    slidesToShow: 1
                }
            }
        ]
    });

    // $('.history-timeline-image').slick({
    //     slidesToShow: 1,
    //     slidesToScroll: 1,
    //     fade: true,
    //     asNavFor: '.history-timeline-dates'
    // });
    $('.history-timeline-dates').slick({
        infinite: true,
        variableWidth: true,
        focusOnSelect: false
    });

    $(window).on("scroll", function() {
        var lastScrollTop = '';

        function stickyMenu() {
            var st = $(window).scrollTop();
            var mainMenuBottom = $('#top-header');
            if ($(window).scrollTop() > 10) {
                if (st > lastScrollTop) {
                    //to hide sticky menu on scroll down addClass replace to removeclass
                    mainMenuBottom.addClass("sticky-start");
                } else {
                    // active sticky menu on scroll up
                    mainMenuBottom.removeClass("sticky-start");
                }

            } else {
                mainMenuBottom.removeClass("sticky-start");
            }
            if ($(window).scrollTop() > 100) {
                if (st > lastScrollTop) {
                    //to hide sticky menu on scroll down addClass replace to removeclass
                    mainMenuBottom.addClass("shadow sticky-on");
                    $('#scroll-to-top').removeClass("hide");
                } else {
                    // active sticky menu on scroll up
                    mainMenuBottom.removeClass("shadow sticky-on");
                    $('#scroll-to-top').addClass("hide");
                }

            } else {
                mainMenuBottom.removeClass("shadow sticky-on");
                $('#scroll-to-top').addClass("hide");
            }

            lastScrollTop = st;
        }
        stickyMenu();

    });


    $("#chooseproducts a").on("click", function() {
        //alert($(this).find(".name").html());

        $($(this).attr("href")).collapse("show");
        $("#chooseproducts a").removeClass("show");
        $(this).addClass("show");

    })

    $("#country-filter a").on("click", function() {
        // alert($(this).find(".name").html());

        $("#country-filter a").removeClass("show");
        $(this).addClass("show");
        $("#collapsestate").collapse("show");
        $("#country-filter-image").attr("src", $(this).attr("data-image"));

    })

    $("#state-filter a").on("click", function() {
        //alert($(this).find(".btn").html());

        $("#collapsedealers").collapse("show");
        $("#state-filter-image").attr("src", $(this).attr("data-image"));

    })

    $("#myTabContent a").on("click", function() {
        $("#myTab a").removeClass("active");
        $($(this).attr("href") + "-tab").addClass("active");
    })


});
// When the user clicks on the button, scroll to the top of the document
function scrolltotop() {
    document.body.scrollTop = 0; // For Safari
    document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
}

$('.popup-gallery').magnificPopup({
    delegate: 'a',
    type: 'image',
    tLoading: 'Loading image #%curr%...',
    mainClass: 'mfp-img-mobile',
    gallery: {
        enabled: true,
        navigateByImgClick: true,
        preload: [0, 1] // Will preload 0 - before current, and 1 after the current image
    },
    image: {
        tError: '<a href="%url%">The image #%curr%</a> could not be loaded.',
        titleSrc: function(item) {
            return item.el.attr('title') + '<small>by Marsel Van Oosten</small>';
        }
    }
});

$('.gallery-item').magnificPopup({
    type: 'image',
    gallery: {
        enabled: true
    }
});


$('.historystep-btn').on('click', function() {
    var getid = $(this).attr('id');
    var getcnumber = getid.slice(11, );

    var getstatusimage = $(this).attr("data-image");
    var getstatuslogo = $(this).find(".historystep-logo").attr("src");
    var getstatusdate = $(this).find(".historystep-date").text()
    var getstatuscontent = $(this).attr("data-content");

    if (getcnumber <= 1) {
        $("#history-modal").find(".history-prev").attr("disabled", true);
    } else {
        $("#history-modal").find(".history-prev").attr("disabled", false);
    }
    if (getcnumber >= 10) {
        $("#history-modal").find(".history-next").attr("disabled", true);
    } else {
        $("#history-modal").find(".history-next").attr("disabled", false);
    }


    var gethistorystepimage = $("#history-modal").find("#history-modal-image");
    var gethistorysteplogo = $("#history-modal").find("#historystep-logo");
    var gethistorystepdate = $("#history-modal").find("#historystep-date");
    var gethistorystepcontent = $("#history-modal").find("#historystep-content");


    $("#history-modal").find(".history-prev").attr("data-history-current", getcnumber);
    $("#history-modal").find(".history-next").attr("data-history-current", getcnumber);
    $("#history-modal").find(".history-prev").attr("data-history-prev", getcnumber - 1);
    $("#history-modal").find(".history-next").attr("data-history-next", Number(getcnumber) + 1);

    gethistorystepimage.attr("src", getstatusimage);
    gethistorysteplogo.attr("src", getstatuslogo);
    gethistorystepdate.text(getstatusdate);
    gethistorystepcontent.text(getstatuscontent);
});

$(".history-prev").on('click', function() {
    var getprevnumber = $(this).attr("data-history-prev");
    $(this).attr("data-history-current", getprevnumber);
    var getcnumber = $(this).attr("data-history-current");
    $(this).attr("data-history-prev", getcnumber - 1);

    if (getcnumber <= 1) {
        $("#history-modal").find(".history-prev").attr("disabled", true);
    } else {
        $("#history-modal").find(".history-prev").attr("disabled", false);
    }
    if (getcnumber >= 10) {
        $("#history-modal").find(".history-next").attr("disabled", true);
    } else {
        $("#history-modal").find(".history-next").attr("disabled", false);
    }

    $("#history-modal").find(".history-next").attr("data-history-current", getprevnumber);
    $("#history-modal").find(".history-next").attr("data-history-next", Number(getprevnumber) + 1);

    var getstatusimage = $("#historystep" + getcnumber).attr("data-image");
    var getstatuslogo = $("#historystep" + getcnumber).find(".historystep-logo").attr("src");
    var getstatusdate = $("#historystep" + getcnumber).find(".historystep-date").text()
    var getstatuscontent = $("#historystep" + getcnumber).attr("data-content");


    var gethistorystepimage = $("#history-modal").find("#history-modal-image");
    var gethistorysteplogo = $("#history-modal").find("#historystep-logo");
    var gethistorystepdate = $("#history-modal").find("#historystep-date");
    var gethistorystepcontent = $("#history-modal").find("#historystep-content");

    gethistorystepimage.attr("src", getstatusimage);
    gethistorysteplogo.attr("src", getstatuslogo);
    gethistorystepdate.text(getstatusdate);
    gethistorystepcontent.text(getstatuscontent);
});

$(".history-next").on('click', function() {
    var getnextnumber = $(this).attr("data-history-next");
    $(this).attr("data-history-current", getnextnumber);
    var getcnumber = $(this).attr("data-history-current");
    $(this).attr("data-history-next", Number(getcnumber) + 1);

    if (getcnumber <= 1) {
        $("#history-modal").find(".history-prev").attr("disabled", true);
    } else {
        $("#history-modal").find(".history-prev").attr("disabled", false);
    }
    if (getcnumber >= 10) {
        $("#history-modal").find(".history-next").attr("disabled", true);
    } else {
        $("#history-modal").find(".history-next").attr("disabled", false);
    }

    $("#history-modal").find(".history-prev").attr("data-history-current", getnextnumber);
    $("#history-modal").find(".history-prev").attr("data-history-prev", Number(getnextnumber) - 1);

    var getstatusimage = $("#historystep" + getcnumber).attr("data-image");
    var getstatuslogo = $("#historystep" + getcnumber).find(".historystep-logo").attr("src");
    var getstatusdate = $("#historystep" + getcnumber).find(".historystep-date").text()
    var getstatuscontent = $("#historystep" + getcnumber).attr("data-content");


    var gethistorystepimage = $("#history-modal").find("#history-modal-image");
    var gethistorysteplogo = $("#history-modal").find("#historystep-logo");
    var gethistorystepdate = $("#history-modal").find("#historystep-date");
    var gethistorystepcontent = $("#history-modal").find("#historystep-content");

    gethistorystepimage.attr("src", getstatusimage);
    gethistorysteplogo.attr("src", getstatuslogo);
    gethistorystepdate.text(getstatusdate);
    gethistorystepcontent.text(getstatuscontent);
});


// Example starter JavaScript for disabling form submissions if there are invalid fields
(function() {
    'use strict';
    window.addEventListener('load', function() {
        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        var forms = document.getElementsByClassName('needs-validation');
        // Loop over them and prevent submission
        var validation = Array.prototype.filter.call(forms, function(form) {
            form.addEventListener('submit', function(event) {
                if (form.checkValidity() === false) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                form.classList.add('was-validated');
            }, false);
        });
    }, false);
})();